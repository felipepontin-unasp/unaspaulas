[
  {
    "objectID": "posts/atividade2/index.html",
    "href": "posts/atividade2/index.html",
    "title": "Monitoramento de Frota de √înibus",
    "section": "",
    "text": "Esta atividade monitora em tempo real a posi√ß√£o dos √¥nibus da linha 702U-10.\n\n\nimport requests\nimport folium\n\n# --- CONFIGURA√á√ÉO ---\nTOKEN = 'e79265097f5eaee904a08c99bafe0e20066df8b620aa00abf2b72459b1445827'\nLINHA_BUSCA = '702U-10' \n\n# 1. AUTENTICA√á√ÉO\nsession = requests.Session()\nurl_auth = f'http://api.olhovivo.sptrans.com.br/v2.1/Login/Autenticar?token={TOKEN}'\nsession.post(url_auth)\n\n# 2. BUSCAR LINHA\nurl_linha = f'http://api.olhovivo.sptrans.com.br/v2.1/Linha/Buscar?termosBusca={LINHA_BUSCA}'\nresponse_linha = session.get(url_linha)\ncodigo_linha = response_linha.json()[0]['cl']\n\n# 3. BUSCAR PARADAS\nurl_paradas = f'http://api.olhovivo.sptrans.com.br/v2.1/Parada/BuscarParadasPorLinha?codigoLinha={codigo_linha}'\ndados_paradas = session.get(url_paradas).json()\n\n# Centralizar mapa\nlat_inicial = dados_paradas[0]['py'] if dados_paradas else -23.55\nlon_inicial = dados_paradas[0]['px'] if dados_paradas else -46.63\n\nm = folium.Map(location=[lat_inicial, lon_inicial], zoom_start=13)\n\n# Adiciona Paradas (Azul)\nfor p in dados_paradas:\n    folium.Marker(\n        [p['py'], p['px']],\n        popup=f\"Parada: {p['np']}\",\n        icon=folium.Icon(color='blue', icon='bus', prefix='fa')\n    ).add_to(m)\n\n# 4. BUSCAR √îNIBUS EM TEMPO REAL\nurl_posicao = f'http://api.olhovivo.sptrans.com.br/v2.1/Posicao/Linha?codigoLinha={codigo_linha}'\ndados_posicao = session.get(url_posicao).json()\n\n# Adiciona √înibus (Vermelho)\nif 'vs' in dados_posicao:\n    for v in dados_posicao['vs']:\n        folium.Marker(\n            [v['py'], v['px']],\n            popup=f\"Prefixo: {v['p']}\",\n            icon=folium.Icon(color='red', icon='location-arrow', prefix='fa')\n        ).add_to(m)\n\n# Exibe o mapa\nm\n\nMake this Notebook Trusted to load map: File -&gt; Trust Notebook"
  },
  {
    "objectID": "posts/atividade3/index.html",
    "href": "posts/atividade3/index.html",
    "title": "Regress√£o linear",
    "section": "",
    "text": "An√°lise de regress√£o linear gerada com Python.\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# 1. DADOS\ntry:\n    valores_x = np.loadtxt('X.txt')\n    valores_y = np.loadtxt('y.txt')\nexcept:\n    # Dados de exemplo (caso n√£o leia o arquivo)\n    valores_x = np.array([2, 3, 4, 5, 6, 7, 8, 9, 10, 12])\n    valores_y = np.array([1200, 1400, 1700, 2100, 2500, 2900, 3400, 3800, 4200, 5000])\n\n# 2. C√ÅLCULOS (Matriz)\nX_matriz = np.column_stack((np.ones(len(valores_x)), valores_x))\nXt = X_matriz.T\n# Calcula a inversa e os coeficientes\nXtX_inv = np.linalg.inv(np.dot(Xt, X_matriz))\nbeta = np.dot(XtX_inv, np.dot(Xt, valores_y))\na, b = beta[0], beta[1]\n\n# 3. GR√ÅFICO (Usando Matplotlib - Mais seguro)\nplt.figure(figsize=(8, 5))\n\n# Pontos (Dados Reais)\nplt.scatter(valores_x, valores_y, color='blue', s=50, label='Dados Reais')\n\n# Reta (Regress√£o)\nplt.plot(valores_x, a + b * valores_x, color='red', linewidth=2, label='Regress√£o Linear')\n\n# Legendas e T√≠tulos\nplt.title(f\"Regress√£o Linear (Intercepto={a:.2f}, Inclina√ß√£o={b:.2f})\")\nplt.xlabel(\"Anos de Estudo\")\nplt.ylabel(\"Sal√°rio\")\nplt.legend()\nplt.grid(True, alpha=0.3)\n\n# Exibe o gr√°fico\nplt.show()"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "unaspaulas",
    "section": "",
    "text": "Cota√ß√£o do Dolar\n\n\n\nnews\n\ncode\n\nanalysis\n\n\n\n\n\n\n\n\n\nNov 22, 2025\n\n\nFelipe Pontin\n\n\n\n\n\n\n\n\n\n\n\n\nMonitoramento de Frota de √înibus\n\n\n\nnews\n\n\n\n\n\n\n\n\n\nNov 22, 2025\n\n\nFelipe Pontin\n\n\n\n\n\n\n\n\n\n\n\n\nRegress√£o linear\n\n\n\nnews\n\n\n\n\n\n\n\n\n\nNov 20, 2025\n\n\nFelipe Pontin\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/atividade1/index.html",
    "href": "posts/atividade1/index.html",
    "title": "Cota√ß√£o do Dolar",
    "section": "",
    "text": "Se voc√™ j√° se perguntou como os sites de not√≠cias e plataformas financeiras conseguem dados hist√≥ricos de moedas, a resposta muitas vezes est√° nas APIs (Interfaces de Programa√ß√£o de Aplicativos) de bancos centrais\n\nTutorial Completo: Como Obter a Cota√ß√£o Hist√≥rica do D√≥lar PTAX com Python e Plotly\nSe voc√™ precisa acompanhar a varia√ß√£o do d√≥lar ao longo do tempo para an√°lises financeiras ou projetos de dados, este tutorial √© para voc√™. Vamos usar o Python para buscar dados oficiais no Banco Central do Brasil (BCB) e criar um gr√°fico interativo de forma simples e r√°pida.\nO Resultado: Um gr√°fico de linhas bonito e interativo, como este:\n\nimport requests\nimport calendar\nfrom datetime import datetime, timedelta\nimport plotly.graph_objects as go\n\n\ndef f(periodo):\n    \"\"\"\n    Busca cota√ß√£o do d√≥lar para um per√≠odo (MMYYYY) e gera gr√°fico.\n    \n    Args:\n        periodo: String no formato \"MMYYYY\" (ex: \"012022\")\n        \n    Returns:\n        Figura do Plotly com gr√°fico de linha da cota√ß√£o\n    \"\"\"\n    first_date = datetime.strptime(periodo, \"%m%Y\")\n    last_date = first_date.replace(\n        day=calendar.monthrange(first_date.year, first_date.month)[1]\n    )\n    \n    data_inicial = first_date.strftime(\"%m-%d-%Y\")\n    data_final = last_date.strftime(\"%m-%d-%Y\")\n    \n    url = f\"https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/CotacaoDolarPeriodo(dataInicial=@dataInicial,dataFinalCotacao=@dataFinalCotacao)?@dataInicial='{data_inicial}'&@dataFinalCotacao='{data_final}'&$format=json\"\n    \n    print(f\"Buscando cota√ß√µes de {first_date.strftime('%d/%m/%Y')} a {last_date.strftime('%d/%m/%Y')}...\")\n    \n    try:\n        response = requests.get(url)\n        response.raise_for_status()\n        data = response.json()\n    except requests.exceptions.RequestException as e:\n        print(f\"Erro ao buscar dados: {e}\")\n        return None\n    \n    cotacoes = data.get('value', [])\n    \n    if not cotacoes:\n        print(\"Nenhuma cota√ß√£o encontrada para este per√≠odo.\")\n        return None\n    \n    cotacoes_dict = {}\n    for cotacao in cotacoes:\n        data_cotacao = datetime.strptime(cotacao['dataHoraCotacao'], \"%Y-%m-%d %H:%M:%S.%f\")\n        cotacoes_dict[data_cotacao.date()] = {\n            'compra': cotacao['cotacaoCompra'],\n            'venda': cotacao['cotacaoVenda']\n        }\n    \n    datas = []\n    valores_compra = []\n    valores_venda = []\n    \n    current_date = first_date\n    ultima_cotacao = None\n    \n    while current_date &lt;= last_date:\n        date_key = current_date.date()\n        \n        if date_key in cotacoes_dict:\n            ultima_cotacao = cotacoes_dict[date_key]\n        \n        if ultima_cotacao:\n            datas.append(current_date)\n            valores_compra.append(ultima_cotacao['compra'])\n            valores_venda.append(ultima_cotacao['venda'])\n        \n        current_date += timedelta(days=1)\n    \n    fig = go.Figure()\n    \n    fig.add_trace(go.Scatter(\n        x=datas,\n        y=valores_compra,\n        mode='lines+markers',\n        name='Cota√ß√£o Compra',\n        line=dict(color='blue', width=2),\n        marker=dict(size=4)\n    ))\n    \n    fig.add_trace(go.Scatter(\n        x=datas,\n        y=valores_venda,\n        mode='lines+markers',\n        name='Cota√ß√£o Venda',\n        line=dict(color='red', width=2),\n        marker=dict(size=4)\n    ))\n    \n    mes_nome = first_date.strftime(\"%B\").capitalize()\n    ano = first_date.year\n    \n    fig.update_layout(\n        title=f'Cota√ß√£o do D√≥lar - {mes_nome} de {ano}',\n        xaxis_title='Data',\n        yaxis_title='Cota√ß√£o (R$)',\n        hovermode='x unified',\n        template='plotly_white',\n        xaxis=dict(tickformat='%d/%m'),\n        height=600\n    )\n    \n    print(f\"Gr√°fico gerado com sucesso! Total de dias: {len(datas)}\")\n    \n    return fig\n\n\nperiodo = \"012022\"\nfig = f(periodo)\nfig.show()\n\nBuscando cota√ß√µes de 01/01/2022 a 31/01/2022...\nGr√°fico gerado com sucesso! Total de dias: 29\n\n\n                            \n                                            \n\n\nüõ†Ô∏è Passo 1: Preparando o Ambiente\nNosso c√≥digo depende de algumas bibliotecas. Abra o terminal (ou o terminal integrado do VS Code) e instale o que √© necess√°rio:\npip install requests plotly kaleido\nrequests: Essencial para fazer a conex√£o e buscar os dados da API do BCB.\nplotly: Cria os gr√°ficos interativos e profissionais.\nkaleido: Um requisito do Plotly para exportar ou exibir os gr√°ficos corretamente em alguns ambientes.\nüêç Passo 2: O C√≥digo Python\nCrie um novo arquivo chamado dolar_cotacao.py e insira o c√≥digo abaixo. Ele est√° configurado para buscar a cota√ß√£o do m√™s de Janeiro de 2022 (‚Äú012022‚Äù), mas voc√™ pode mudar o per√≠odo facilmente no final do script.\nimport requests import calendar from datetime import datetime, timedelta import plotly.graph_objects as go import locale import sys\n\n‚Äî Configura√ß√µes de Locale para Portugu√™s ‚Äî\n\n\nIsso garante que o nome do m√™s e a formata√ß√£o sejam em portugu√™s.\ntry: locale.setlocale(locale.LC_ALL, ‚Äòpt_BR.UTF-8‚Äô) except locale.Error: try: locale.setlocale(locale.LC_ALL, ‚Äòpt_PT.UTF-8‚Äô) except locale.Error: try: locale.setlocale(locale.LC_ALL, ‚Äô‚Äô) except locale.Error: print(‚ÄúAviso: N√£o foi poss√≠vel configurar o locale para portugu√™s.‚Äù)\ndef buscar_cotacao_e_gerar_grafico(periodo): ‚Äú‚Äú‚Äù Busca cota√ß√£o do d√≥lar (PTAX) para um per√≠odo (MMYYYY) e gera gr√°fico.\nA cota√ß√£o segue a regra: se n√£o houver cota√ß√£o em um dia, a √∫ltima \ncota√ß√£o dispon√≠vel √© utilizada (comum em fins de semana/feriados).\n\nArgs:\n    periodo: String no formato \"MMYYYY\" (ex: \"082021\")\n    \nReturns:\n    Figura do Plotly (go.Figure) com gr√°fico de linha da cota√ß√£o\n\"\"\"\ntry:\n    # 1. Determina as datas de in√≠cio e fim do m√™s\n    first_date = datetime.strptime(periodo, \"%m%Y\")\n    last_day = calendar.monthrange(first_date.year, first_date.month)[1]\n    last_date = first_date.replace(day=last_day)\nexcept ValueError:\n    print(f\"Erro: O per√≠odo '{periodo}' est√° no formato incorreto. Use MMYYYY (ex: 082021).\")\n    return None\n\n# Formata datas para o endpoint da API do BCB (ex: 01-01-2022)\ndata_inicial_api = first_date.strftime(\"%m-%d-%Y\")\ndata_final_api = last_date.strftime(\"%m-%d-%Y\")\n\n# Monta a URL da API do Banco Central\nurl = (\n    f\"[https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/CotacaoDolarPeriodo](https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/CotacaoDolarPeriodo)\"\n    f\"(dataInicial=@dataInicial,dataFinalCotacao=@dataFinalCotacao)?\"\n    f\"@dataInicial='{data_inicial_api}'&@dataFinalCotacao='{data_final_api}'&$format=json\"\n)\n\nprint(f\"Buscando cota√ß√µes de {first_date.strftime('%d/%m/%Y')} a {last_date.strftime('%d/%m/%Y')}...\")\n\n# 2. Faz a requisi√ß√£o √† API\ntry:\n    response = requests.get(url, timeout=10)\n    response.raise_for_status() # Lan√ßa exce√ß√£o se houver erro HTTP\n    data = response.json()\nexcept requests.exceptions.Timeout:\n    print(\"Erro: Tempo limite da requisi√ß√£o excedido.\")\n    return None\nexcept requests.exceptions.RequestException as e:\n    print(f\"Erro ao buscar dados da API do BCB: {e}\")\n    return None\n\ncotacoes = data.get('value', [])\n\nif not cotacoes:\n    print(\"Nenhuma cota√ß√£o encontrada para este per√≠odo.\")\n    return None\n\n# 3. Processa e preenche os dados (mantendo a √∫ltima cota√ß√£o para fins de semana)\ncotacoes_por_data = {}\nfor cotacao in cotacoes:\n    # Extrai apenas a data da string (YYYY-MM-DD)\n    data_cotacao = datetime.strptime(cotacao['dataHoraCotacao'][:10], \"%Y-%m-%d\")\n    cotacoes_por_data[data_cotacao.date()] = {\n        'compra': cotacao['cotacaoCompra'],\n        'venda': cotacao['cotacaoVenda']\n    }\n\ndatas = []\nvalores_compra = []\nvalores_venda = []\n\ncurrent_date = first_date\nultima_cotacao = None\n\n# Itera dia a dia para preencher fins de semana com a √∫ltima cota√ß√£o\nwhile current_date &lt;= last_date:\n    date_key = current_date.date()\n    \n    if date_key in cotacoes_por_data:\n        ultima_cotacao = cotacoes_por_data[date_key]\n    \n    if ultima_cotacao:\n        datas.append(current_date)\n        valores_compra.append(ultima_cotacao['compra'])\n        valores_venda.append(ultima_cotacao['venda'])\n    \n    current_date += timedelta(days=1)\n\n# 4. Gera a figura do Plotly\nfig = go.Figure()\n\n# Tra√ßado da Cota√ß√£o Compra\nfig.add_trace(go.Scatter(\n    x=datas,\n    y=valores_compra,\n    mode='lines+markers',\n    name='Cota√ß√£o Compra (PTAX)',\n    line=dict(color='#1f77b4', width=3), # Azul moderno\n    marker=dict(size=6, symbol='circle')\n))\n\n# Tra√ßado da Cota√ß√£o Venda\nfig.add_trace(go.Scatter(\n    x=datas,\n    y=valores_venda,\n    mode='lines+markers',\n    name='Cota√ß√£o Venda (PTAX)',\n    line=dict(color='#d62728', width=3), # Vermelho moderno\n    marker=dict(size=6, symbol='diamond')\n))\n\n# Formata√ß√£o do layout\nmes_nome = first_date.strftime(\"%B\").capitalize()\nano = first_date.year\n\nfig.update_layout(\n    title={\n        'text': f'Cota√ß√£o do D√≥lar PTAX - {mes_nome} de {ano}',\n        'y':0.95,\n        'x':0.5,\n        'xanchor': 'center',\n        'yanchor': 'top',\n        'font': dict(size=20, color='#333')\n    },\n    xaxis_title='Dia do M√™s',\n    yaxis_title='Cota√ß√£o (R$)',\n    hovermode='x unified', # Mostra info dos dois tra√ßados no mesmo ponto\n    template='plotly_white', # Tema limpo\n    xaxis=dict(tickformat='%d/%m', showgrid=True, gridcolor='#e0e0e0'),\n    yaxis=dict(tickprefix='R$ ', showgrid=True, gridcolor='#e0e0e0'),\n    legend=dict(orientation=\"h\", yanchor=\"bottom\", y=1.02, xanchor=\"right\", x=1),\n    height=650,\n    margin=dict(t=80, b=50, l=50, r=50)\n)\n\nprint(f\"Gr√°fico gerado com sucesso! Total de dias plotados: {len(datas)}\")\n\nreturn fig\n\n\n‚Äî Bloco Principal de Execu√ß√£o ‚Äî\n\n\nMUDE ESTA VARI√ÅVEL para o per√≠odo que voc√™ deseja (MMYYYY)\nperiodo_exemplo = ‚Äú012022‚Äù\nprint(f‚ÄùIniciando a busca para o per√≠odo: {periodo_exemplo}‚Äú) fig = buscar_cotacao_e_gerar_grafico(periodo_exemplo)\nif fig: # A fun√ß√£o show() do Plotly abre o gr√°fico interativo no seu navegador. fig.show() else: print(‚ÄúA execu√ß√£o foi conclu√≠da sem a gera√ß√£o do gr√°fico devido a erros ou falta de dados.‚Äù)"
  }
]